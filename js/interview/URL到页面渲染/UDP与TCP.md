# 传输层协议：UDP、TCP

# UDP协议
- UDP协议只负责数据包的搬运，不保证数据包的有序或丢失、不会对数据进行解析、拼接等操作
- 没有控制流量的算法
- 面向无对象的，也就是说不需要在正式传递数据之前就连接双方(不需要三次握手)

发送端：应用层(浏览器) --> 传输层 --> 网络层
接收端：网络层 --> 传输层 --> 应用层

## 缺点：
  - 不可靠性
    1. 无连接
    2. 不解析数据
    3. 没有拥塞控制
## 优点：
  - 高效性
    1. 简单，不需要保证数据不会丢失且有序
    2. 头部开销小，只有8字节，而TCP至少20字节
## 传输方式：
  1. 一对一
  2. 一对多
  3. 多对多
  4. 多对一

# TCP协议
  要建立连接，传输过程有各种算法保证数据的可靠性，没有UDP高效
  会管理数据包
  有拥塞控制算法
  - 三次握手(建立连接)
    1. 客户端向服务端发送连接请求 
    2. 服务端向客户端发送请求应答
    3. 客户端接收到应答后，向服务端发送确认报文(确认建立好了连接)
  - 四次挥手(发生在断开连接时)
    1. 客户端向服务端发送连接释放请求
    2. 服务端接收到释放请求，会告诉应用层要释放TCP连接了，就会发送ACK包，并进入CLOSE_wait状态 (完成后客户端是不能向服务端发送数据了，可TCP连接是双向的，此时服务端还是可以给客户发送数据的)
    3. 如果有数据没传完，服务端继续把数据传完到客户端
    4. 客户端接收到最后一次数据后，向服务端发起确认断开请求，2ms后如果没有得到应答就自动断开请求

## 为什么TCP建立连接需要三次握手，明明两次就可以了？
  网络超时请求A没送达时，客户端会认为该请求失效了，并重新发送请求B，可TCP有一个超时重传的机制，还会保证数据包不会丢失，会将A请求重新发往服务端，可没有超时的请求B会先到达服务端，服务端对B作出响应，这便只有两次握手，建立连接，数据传输完毕后连接断开，可之后TCP重传的那个超时的请求A才来到服务端，服务端会认为是客户端又要开始建立连接了，于是给予响应，可此时的客户端已关闭，服务端会一直等待，造成资源浪费。这就是少了确认建立好连接了那一步骤的不足

  