# URL到页面渲染
掘金文章解析：https://juejin.cn/post/6844903784229896199
## URL
- URL（Uniform Resource Locator），统一资源定位符，用于定位互联网上资源，俗称网址。
格式：scheme: // host.domain:port / path / filename ? abc = 123 #  456789

## 定位到该url所在的IP地址
- IP协议生效 让两个IP地址相互认识
  IP协议进行DNS域名解析：我的电脑 --> 向上级服务器查询是否又该域名的IP记录
  三次握手
  开始数据交互


## 浏览器接收到html文件
- 浏览器对数据包进行词法分析 --> 字符串分成一段一段，对其进行标记，读取这些标记的字符串 --标记--> node结点(a/p/div等标签节点) --> 根据node节点的联系，构成一个DOM树

## 浏览器接收到CSS
步骤同上分析CSS --> CSSOM树
递归CSSOM树确定具体的元素到底是什么样式

## 生成渲染树
DOM树 + CSSOM树 = render树(渲染)

渲染树只包括需要显示的节点

## 回流 （根据渲染树，GPU来绘制页面布局）
浏览器的渲染引擎 每个渲染引擎的执行是一个线程

## 为什么操作DOM性能很差？
js操作DOM结构时 
1. 会出现浏览器的渲染引擎和js执行引擎两个引擎进行同时工作，两个线程需要保持通信，同时工作，多线程并行操作导致性能消耗过大；
2. 可能引起 重绘 和 回流

### 一次性插入一万个DOM操作怎么保证不卡顿
- 懒加载
- 虚拟滚动

## 什么情况下会阻塞渲染
html 与 CSS 本身就会阻塞渲染
script 标签会阻塞代码

## 重绘和回流
回流：节点的几何布局、元素属性发生变化
重绘：节点更改不影响布局的东西
回流一定会重绘，重绘不一定会回流

会导致性能为问题的操作：
1. 改变window大小(导致回流)
2. 改变字体大小(导致回流)
3. display: none (消失到隐藏会导致回流)
4. 设置节点信息的几个方法、offsetTop等都会引发回流

## 减少代码中的回流和重绘：
1. 用 visibility(引发重绘) 代替 display: none(引发回流)
2. 不要把节点的属性值放在一个循环里面当成循环的变量
3. 尽量不要使用table布局